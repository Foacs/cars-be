#set($inputRoot = $input.path('$'))
{
  "registration": "$inputRoot.registration",
  "serialNumber": "$inputRoot.serialNumber",
  "owner": "$inputRoot.owner",
  "brand": "$inputRoot.brand",
  "model": "$inputRoot.model",
  "motorization": "$inputRoot.motorization",
  "engineCode": "$inputRoot.engineCode",
  "releaseDate": "$inputRoot.releaseDate",
  "comments": "$inputRoot.comments",
  "pictures": [
    #foreach($picture in $inputRoot.pictures)
    {
      "pictureId": "$picture.pictureId"
    }
    #if($foreach.hasNext),#end
    #end
  ],
  "interventions": [
    #foreach($intervention in $inputRoot.interventions)
    {
      "year": $intervention.year,
      "number": $intervention.number,
      "status": "$intervention.status",
      "description": "$intervention.description",
      "mileage": $intervention.mileage,
      "estimatedTime": $intervention.estimatedTime,
      "realTime": $intervention.realTime,
      "amount": $intervention.amount,
      "paidAmount": $intervention.paidAmount,
      "comments": "$intervention.comments,
      "tasks": [
        #foreach($task in $intervention.tasks)
        {
          "label": "$task.label",
          "steps": [
            #foreach($step in $steps)
            {
              "type": "$step.type",
              "description": "$step.description",
              "done": $step.done
            }
            #if($foreach.hasNext),#end
            #end
          ]
        }
        #if($foreach.hasNext),#end
        #end
      ]
    }
    #if($foreach.hasNext),#end
    #end
  ]
}
